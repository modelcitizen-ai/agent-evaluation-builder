"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[167],{3247:(e,n,t)=>{t.d(n,{U:()=>a});var s=t(2115);function a(){let[e,n]=(0,s.useState)(!1),t=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n(!0);try{let i={data:e.slice(0,10),columns:t,useFallback:s},o=await fetch("/api/analyze-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!o.ok)throw Error("Azure OpenAI API error! status: ".concat(o.status));let l=await o.json();if(l.useFallback)return console.log("Using fallback analysis as directed by API response"),n(!1),a(e,t);try{let t=await fetch("/api/suggest-criteria",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({datasetSample:e.slice(0,10),taskDescription:"Human evaluation of content items and responses through evaluation forms",useFallback:s})});if(t.ok){let e=await t.json();if(e.useFallback){let e={...l,success:!0};return n(!1),e}let s={...l,suggestedCriteria:e.criteria,success:!0};return n(!1),s}}catch(e){console.error("Error getting criteria suggestions:",e)}return n(!1),{...l,success:!0}}catch(s){return console.error("AI analysis failed:",s),n(!1),a(e,t)}},a=(e,n)=>{try{if(!Array.isArray(e)||0===e.length)throw Error("Empty or invalid data provided");if(!Array.isArray(n)||0===n.length)throw Error("Empty or invalid columns provided");let t=e.slice(0,Math.min(10,e.length)),s=n.map(e=>e.toLowerCase()),a={},l={hasVideoContent:!1,hasImageContent:!1,domainHints:new Set};for(let e of(n.forEach(e=>{a[e]={nonEmptyValues:0,values:[],totalLength:0,hasMediaContent:!1,numericValues:0,uniqueValues:new Set}}),t))for(let t of n){let n=e[t];if(null!=n&&""!==n){let e=String(n).toLowerCase();a[t].nonEmptyValues++,a[t].values.push(e),a[t].totalLength+=e.length,!isNaN(Number(e))&&a[t].numericValues++,(e.includes(".mp4")||e.includes(".webm")||e.includes("youtube.com")||e.includes("youtu.be")||e.includes("vimeo.com")||e.includes(".jpg")||e.includes(".png")||e.includes(".gif")||e.includes("imgur.com")||e.includes("unsplash.com"))&&(a[t].hasMediaContent=!0,(e.includes(".mp4")||e.includes(".webm")||e.includes("youtube.com")||e.includes("youtu.be")||e.includes("vimeo.com"))&&(l.hasVideoContent=!0),(e.includes(".jpg")||e.includes(".png")||e.includes(".gif")||e.includes("imgur.com")||e.includes("unsplash.com"))&&(l.hasImageContent=!0));let s=t.toLowerCase();(s.includes("category")||s.includes("type")||s.includes("domain")||s.includes("topic")||s.includes("subject"))&&(a[t].uniqueValues.add(e),l.domainHints.add(e))}}let r=n.map((e,n)=>{let i;let o=s[n],l=a[e],r="Metadata",c=50,u='Column "'.concat(e,'" role determined by basic content analysis');if(0===l.nonEmptyValues)r="Excluded",u='Column "'.concat(e,'" contains no values in sample'),c=90;else if(o.includes("input")||o.includes("query")||o.includes("prompt")||o.includes("question"))r="Input",u='Column name "'.concat(e,'" suggests input data'),c=85;else if(o.includes("output")||o.includes("response")||o.includes("generated")||o.includes("completion"))r="Model Output",u='Column name "'.concat(e,'" suggests output/response data'),c=85;else if(l.hasMediaContent)r="Input",u='Column "'.concat(e,'" appears to contain media links or references'),c=80;else if(o.includes("video")||o.includes("image")||o.includes("url")||o.includes("link"))r="Input",u='Column name "'.concat(e,'" suggests media content'),c=75;else{let n=l.values.length>0?l.totalLength/l.values.length:0;n>100?(r="Input",u='Column "'.concat(e,'" contains longer text, suggesting detailed content'),c=65):n<20&&l.numericValues>l.values.length/2&&(r="Metadata",u='Column "'.concat(e,'" contains short numeric values, suggesting metadata'),c=70)}let d=l.nonEmptyValues/t.length*100;return d>90?c=Math.min(95,c+5):d<50&&(c=Math.max(30,c-5)),i="Input"===r?"Input Data":"Model Output"===r?"Model Output":"Excluded"===r?"Excluded Data":"Metadata",{id:e,name:e,suggestedRole:i,confidence:c,reasoning:u,reason:u,userRole:r}}),c="Content Quality";if(l.domainHints.size>0){let e=Array.from(l.domainHints).slice(0,3);1===e.length?c="".concat(e[0]):e.length>1&&(c="".concat(e.join("/")))}else if(l.hasVideoContent)c="Video Content";else if(l.hasImageContent)c="Visual Content";else{let e=s.some(e=>e.includes("customer")||e.includes("support")||e.includes("ticket")),n=s.some(e=>e.includes("product")||e.includes("item")||e.includes("merchandise")),t=s.some(e=>e.includes("article")||e.includes("blog")||e.includes("post"));if(e)c="Customer Support";else if(n)c="Product Description";else if(t)c="Article Content";else{let e=r.find(e=>"Model Output"===e.userRole),n=r.find(e=>"Input"===e.userRole);if(e){let n=e.name.replace(/_/g," ").replace(/([A-Z])/g," $1").trim().replace(/response|output|generated|result|prediction|model/gi,"").trim();c=!n||n.length<3?"Content Quality":"".concat(n," Content")}else if(n){let e=n.name.replace(/_/g," ").replace(/([A-Z])/g," $1").trim().replace(/content|text|data|input|query|prompt|question/gi,"").trim();c=e?"".concat(e," Content"):"Content Quality"}}}let u=l.hasVideoContent?i():o();return{columnAnalysis:r.map(e=>({columnName:e.name,suggestedRole:e.suggestedRole,confidence:e.confidence,reasoning:e.reason})),suggestedMetrics:u,evaluationName:c,instructions:"Please evaluate each item carefully. Focus on quality, relevance, accuracy, and appropriateness of the content.",success:!0}}catch(e){return console.error("Error in fallback analysis:",e),{columnAnalysis:n.map(e=>({columnName:e,suggestedRole:"Input Data",confidence:50,reasoning:"Emergency fallback - analysis failed"})),suggestedMetrics:l(),evaluationName:"Content Evaluation",instructions:"Please evaluate each item carefully.",success:!0}}},i=(()=>{let e=[{name:"Video Quality",type:"likert-scale",options:["1","2","3","4","5"],reasoning:"Assesses overall video quality including visual clarity, audio quality, and production value",confidence:85,required:!0,likertLabels:{low:"Poor",high:"Excellent"}},{name:"Is the video content appropriate and clear?",type:"yes-no",options:["Yes","No"],reasoning:"Binary assessment of content appropriateness and clarity",confidence:80,required:!0},{name:"Additional Comments",type:"text-input",options:[],reasoning:"Allows for detailed feedback on video content",confidence:90,required:!1}];return()=>JSON.parse(JSON.stringify(e))})(),o=(()=>{let e=[{name:"Overall Quality",type:"likert-scale",options:["1","2","3","4","5"],reasoning:"Assesses the general quality of the content",confidence:85,required:!0,likertLabels:{low:"Poor",high:"Excellent"}},{name:"Is the content appropriate and accurate?",type:"yes-no",options:["Yes","No"],reasoning:"Binary assessment of content appropriateness and accuracy",confidence:80,required:!0},{name:"Additional Comments",type:"text-input",options:[],reasoning:"Allows for detailed feedback on specific aspects",confidence:90,required:!1}];return()=>JSON.parse(JSON.stringify(e))})(),l=(()=>{let e=[{name:"Overall Quality",type:"likert-scale",options:["1","2","3","4","5"],reasoning:"Default metric - analysis failed",confidence:50,required:!0,likertLabels:{low:"Poor",high:"Excellent"}},{name:"Is the content appropriate?",type:"yes-no",options:["Yes","No"],reasoning:"Default metric - analysis failed",confidence:50,required:!0},{name:"Additional Comments",type:"text-input",options:[],reasoning:"Default metric - analysis failed",confidence:50,required:!1}];return()=>JSON.parse(JSON.stringify(e))})();return{analyzeWithAI:t,analyzeFallback:a,isAnalyzing:e}}},5695:(e,n,t)=>{var s=t(8999);t.o(s,"useParams")&&t.d(n,{useParams:function(){return s.useParams}}),t.o(s,"usePathname")&&t.d(n,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(n,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(n,{useSearchParams:function(){return s.useSearchParams}})},8112:(e,n,t)=>{t.d(n,{A:()=>i});var s=t(5155),a=t(5695);function i(e){let{title:n,subtitle:t,children:i,actions:o}=e;return(0,a.useRouter)(),(0,s.jsxs)("div",{className:"min-h-[calc(100vh-4rem)] bg-gray-50 pt-9",children:[(0,s.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:n}),t&&(0,s.jsx)("p",{className:"text-sm text-gray-600",children:t})]}),o&&(0,s.jsx)("div",{className:"flex-shrink-0 ml-4",children:o})]})}),(0,s.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:i})]})}}}]);