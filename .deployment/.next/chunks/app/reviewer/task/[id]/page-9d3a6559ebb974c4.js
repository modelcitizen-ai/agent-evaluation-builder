(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[206],{781:(e,t,r)=>{"use strict";function a(e,t,r,a){let s=r.length>0?Object.keys(r[0]):[],o=a.map(e=>e.name);return{evaluationId:e,evaluationName:t,lastUpdated:new Date().toISOString(),results:[],columns:{original:s,responses:o}}}function s(e,t){return{...e,lastUpdated:new Date().toISOString(),results:[...e.results,t]}}function o(e){try{return JSON.parse(localStorage.getItem("resultsDatasets")||"{}")[e]||null}catch(e){return console.error("Error retrieving results dataset:",e),null}}function n(e){try{let t=JSON.parse(localStorage.getItem("resultsDatasets")||"{}");t[e.evaluationId]=e,localStorage.setItem("resultsDatasets",JSON.stringify(t))}catch(e){console.error("Error saving results dataset:",e)}}r.d(t,{ST:()=>a,aU:()=>s,dQ:()=>o,zw:()=>n})},4367:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(5155),s=r(781),o=r(2115),n=r(5695),i=r(9416),l=r(8112),c=r(7489);function d(){let e=(0,n.useRouter)(),t=(0,n.useParams)(),r=(0,n.useSearchParams)(),[d,u]=(0,o.useState)(1),[m,g]=(0,o.useState)({}),[v,p]=(0,o.useState)(!1),[h,x]=(0,o.useState)(!1),[f,b]=(0,o.useState)(null),[w,y]=(0,o.useState)({}),[N,j]=(0,o.useState)(1),[S,I]=(0,o.useState)(new Set),[_,k]=(0,o.useState)(!1),[E,R]=(0,o.useState)(!1),[C,O]=(0,o.useState)(Date.now()),[L,P]=(0,o.useState)(50),[J,A]=(0,o.useState)(!1),D=(0,o.useRef)(null),M=t.id,U=(e,t)=>{try{let r=JSON.parse(localStorage.getItem("evaluationReviewers")||"[]"),a=r.findIndex(t=>t.id===e&&(t.evaluationId===M||t.evaluationId===Number(M)));if(-1===a)return console.warn("[updateReviewerAverageTime] Reviewer ".concat(e," not found for evaluation ").concat(M)),0;{r[a];let s="time_tracking_".concat(e,"_").concat(M),o=JSON.parse(localStorage.getItem(s)||"[]");o.push(t);let n=o.reduce((e,t)=>e+t,0)/o.length;return r[a].avgTime=n.toFixed(1),localStorage.setItem("evaluationReviewers",JSON.stringify(r)),localStorage.setItem(s,JSON.stringify(o)),console.log("[updateReviewerAverageTime] Updated reviewer ".concat(e," average time: ").concat(n.toFixed(1),"s (").concat(o.length," questions completed)")),n}}catch(e){return console.error("[updateReviewerAverageTime] Error updating reviewer average time:",e),0}};if((0,o.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("evaluations")||"[]"),t=Number(M),a=e.find(e=>Number(e.id)===t);a?(b(a),I(new Set),console.log("[loadEvaluation] Found evaluation with ID ".concat(M,":"),a)):console.error("âŒ Evaluation with ID ".concat(M," not found"));try{let e=r.get("participant"),t=e?"evaluation_".concat(M,"_reviewer_").concat(e,"_responses"):"evaluation_".concat(M,"_responses");console.log("[loadResponses] Looking for saved responses with key: ".concat(t));let s=localStorage.getItem(t);if(s){console.log("[loadResponses] Found saved responses:",s);try{let e;let t=JSON.parse(s);console.log("[loadResponses] Parsed saved responses:",t),y(t);let o=JSON.parse(localStorage.getItem("evaluationReviewers")||"[]"),n=r.get("participant");if(n&&(e=o.find(e=>e.id===n&&(e.evaluationId===M||e.evaluationId===Number(M)))),!e){let t=o.filter(e=>e.evaluationId===M||e.evaluationId===Number(M));t.length>0&&(e=t[0])}let i=(null==e?void 0:e.status)==="completed"||(null==e?void 0:e.completed)===(null==e?void 0:e.total)&&(null==e?void 0:e.total)>0,l=n?"evaluation_".concat(M,"_reviewer_").concat(n,"_progress"):"evaluation_".concat(M,"_progress"),c=localStorage.getItem(l);if(c)try{let e=JSON.parse(c);if(e.furthestItem){let t=e.furthestItem;console.log("[loadProgress] Found saved progress. Setting to item ".concat(t)),j(t),i&&a?(console.log("[loadProgress] Evaluation is completed. Setting current item to 1 for review"),u(1),k(!0)):u(t)}}catch(e){console.error("[loadProgress] Error parsing saved progress:",e)}else i&&a&&(console.log("[loadProgress] No saved progress but evaluation is completed. Setting to first item for review."),u(1),j(a.totalItems),k(!0))}catch(e){console.error("[loadResponses] Error parsing saved responses:",e)}}else console.log("[loadResponses] No existing responses found. Creating initial state.")}catch(e){console.error("[loadResponses] Error loading saved responses:",e)}},[M]),(0,o.useEffect)(()=>{if(f&&0===Object.keys(w).length){let e={1:{}};console.log("[initResponses] Setting initial empty responses:",e),y(e);let t=r.get("participant"),a=t?"evaluation_".concat(M,"_reviewer_").concat(t,"_responses"):"evaluation_".concat(M,"_responses");try{localStorage.setItem(a,JSON.stringify(e)),console.log("[initResponses] Saved initial empty responses to localStorage with key: ".concat(a))}catch(e){console.error("[initResponses] Error saving initial responses to localStorage:",e)}}if(f&&_){let e=new Set;for(let t=1;t<=f.totalItems;t++)e.add(t);I(e),console.log("[initSubmittedItems] Set all items as submitted for completed evaluation:",Array.from(e))}else if(f)try{let e=r.get("participant"),t=e?"evaluation_".concat(M,"_reviewer_").concat(e,"_submitted"):"evaluation_".concat(M,"_submitted"),a=localStorage.getItem(t);if(a){let e=JSON.parse(a),t=new Set(e);I(t),console.log("[initSubmittedItems] Loaded submitted items from localStorage:",Array.from(t))}else I(new Set),console.log("[initSubmittedItems] No submitted items found, starting with empty set")}catch(e){console.error("[initSubmittedItems] Error loading submitted items from localStorage:",e),I(new Set)}},[f,w,M,_]),(0,o.useEffect)(()=>{let e=e=>{if(!J||!D.current)return;let t=D.current.getBoundingClientRect(),r=t.width,a=(e.clientX-t.left)/r*100;P(a=Math.max(30,Math.min(70,a)))},t=()=>{A(!1)};return J&&(document.addEventListener("mousemove",e),document.addEventListener("mouseup",t)),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}},[J]),(0,o.useEffect)(()=>{try{let e=w[d]||{};if(console.log("[loadCurrentItem] Loading saved responses for item ".concat(d,":"),e),g(e),0===Object.keys(e).length){let e=r.get("participant"),t=e?"evaluation_".concat(M,"_reviewer_").concat(e,"_responses"):"evaluation_".concat(M,"_responses"),a=localStorage.getItem(t);if(a)try{let e=JSON.parse(a);e[d]&&(console.log("[loadCurrentItem] Found responses in localStorage for item ".concat(d,":"),e[d]),g(e[d]))}catch(e){console.error("[loadCurrentItem] Error parsing saved responses:",e)}}}catch(e){console.error("[loadCurrentItem] Error loading item responses:",e)}if(R(!1),O(Date.now()),d>N){j(d);let e=r.get("participant"),t=e?"evaluation_".concat(M,"_reviewer_").concat(e,"_progress"):"evaluation_".concat(M,"_progress");try{localStorage.setItem(t,JSON.stringify({furthestItem:d})),console.log("[updateProgress] Saved furthest item reached to localStorage: ".concat(d," with key: ").concat(t))}catch(e){console.error("[updateProgress] Error saving progress to localStorage:",e)}}},[d,w,N,M]),(0,o.useEffect)(()=>{if(M){let e=r.get("participant"),t=e?"evaluation_".concat(M,"_reviewer_").concat(e,"_responses"):"evaluation_".concat(M,"_responses");Object.keys(w).length>0?(console.log("[saveResponses] Saving responses to localStorage with key: ".concat(t),w),localStorage.setItem(t,JSON.stringify(w)),console.log("[saveResponses] Responses saved successfully. Current localStorage:",Object.keys(localStorage).filter(e=>e.includes("evaluation_")))):console.log("[saveResponses] No responses to save for ".concat(t))}},[w,M]),(0,o.useEffect)(()=>{if(f&&S.size>0){let e=S.size;try{let t;let a=JSON.parse(localStorage.getItem("evaluationReviewers")||"[]"),s=r.get("participant");if(s){let e=a.find(e=>e.id===s&&(e.evaluationId===M||e.evaluationId===Number(M)));e&&(t={id:e.id,name:e.name})}if(!t){let e=a.filter(e=>e.evaluationId===M||e.evaluationId===Number(M));if(e.length>0)t={id:e[0].id,name:e[0].name};else{let e=f.assignedReviewers||[];t=e.length>0?e[0]:{id:"reviewer-1",name:"Anonymous Reviewer"}}}let o=a.findIndex(e=>e.id===t.id&&(e.evaluationId===M||e.evaluationId===Number(M)));if(-1!==o){let r=a[o].completed;if(r!==e){a[o].completed=e,localStorage.setItem("evaluationReviewers",JSON.stringify(a)),console.log("[syncProgress] Synchronized reviewer ".concat(t.id," progress: ").concat(e,"/").concat(f.totalItems," (was ").concat(r,")"));try{{let r=new CustomEvent("reviewerProgressUpdated",{detail:{evaluationId:Number(M),reviewerId:t.id,completed:e,total:f.totalItems,avgTime:a[o].avgTime||"0.0"}});window.dispatchEvent(r),console.log("[syncProgress] Dispatched reviewerProgressUpdated event for synchronization")}}catch(e){console.error("[syncProgress] Error dispatching progress sync event:",e)}}}}catch(e){console.error("[syncProgress] Error synchronizing reviewer progress:",e)}}},[f,S,M]),!f)return(0,a.jsx)(l.A,{title:"Evaluation Not Found",children:(0,a.jsx)("div",{className:"flex flex-col justify-center items-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Evaluation Not Found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"The evaluation you're looking for doesn't exist or has been removed."}),"          ",(0,a.jsx)("button",{onClick:()=>e.push("/reviewer"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-500 hover:bg-blue-600",children:"Back to Review Tasks"})]})})});let z=f.criteria.every(e=>{if(!e.required)return!0;let t=m["criterion-".concat(e.id)];return null!=t&&""!==t.trim()}),T=(e,t)=>{g(a=>{let s={...a,["criterion-".concat(e)]:t},o={...w,[d]:s};y(o);let n=r.get("participant"),i=n?"evaluation_".concat(M,"_reviewer_").concat(n,"_responses"):"evaluation_".concat(M,"_responses");try{localStorage.setItem(i,JSON.stringify(o)),console.log("[handleInputChange] Saved responses to localStorage for item ".concat(d," with key: ").concat(i),s)}catch(e){console.error("[handleInputChange] Error saving to localStorage:",e)}return R(!0),s})},F=async e=>{let t;if(e.preventDefault(),!z)return;p(!0);let a={...w,[d]:m};y(a);let o=r.get("participant"),n=o?"evaluation_".concat(M,"_reviewer_").concat(o,"_responses"):"evaluation_".concat(M,"_responses");try{localStorage.setItem(n,JSON.stringify(a)),console.log("[handleSubmit] Explicitly saved responses to localStorage with key: ".concat(n,":"),a)}catch(e){console.error("[handleSubmit] Error saving to localStorage:",e)}let i=Math.round((Date.now()-C)/1e3);console.log("[handleSubmit] Question completed in ".concat(i," seconds"));let l=(d-1)%f.data.length,c=f.data[l];try{let e=JSON.parse(localStorage.getItem("evaluationReviewers")||"[]"),a=r.get("participant");if(a){let r=e.find(e=>e.id===a&&(e.evaluationId===M||e.evaluationId===Number(M)));r?(t={id:r.id,name:r.name},console.log("[handleSubmit] Found specific reviewer from URL: ".concat(t.name," (ID: ").concat(t.id,") for evaluation ").concat(M))):console.warn("[handleSubmit] Reviewer ".concat(a," not found for evaluation ").concat(M))}if(!t){let r=e.filter(e=>e.evaluationId===M||e.evaluationId===Number(M));if(r.length>0)t={id:r[0].id,name:r[0].name},console.log("[handleSubmit] Using first matching reviewer: ".concat(t.name," (ID: ").concat(t.id,") for evaluation ").concat(M));else{let e=f.assignedReviewers||[];t=e.length>0?e[0]:{id:"reviewer-1",name:"Anonymous Reviewer"},console.log("[handleSubmit] Using fallback reviewer: ".concat(t.name," (ID: ").concat(t.id,")"))}}}catch(e){console.error("[handleSubmit] Error finding reviewer:",e),t={id:"reviewer-1",name:"Anonymous Reviewer"}}let g={evaluationId:Number(M),itemId:c.item_id||c.id||"item-".concat(d),reviewerId:t.id,reviewerName:t.name,submittedAt:new Date().toISOString(),timeSpent:i,responses:Object.fromEntries(Object.entries(m).map(e=>{let[t,r]=e,a=Number(t.split("-")[1]),s=f.criteria.find(e=>e.id===a);return[(null==s?void 0:s.name)||t,r]})),originalData:c},v=(0,s.dQ)(Number(M));if(v){let e=(0,s.aU)(v,g);(0,s.zw)(e)}U(t.id,i),await new Promise(e=>setTimeout(e,1e3)),p(!1);let h=new Set([...S,d]);I(h),R(!1);try{let e=r.get("participant"),t=e?"evaluation_".concat(M,"_reviewer_").concat(e,"_submitted"):"evaluation_".concat(M,"_submitted"),a=Array.from(h);localStorage.setItem(t,JSON.stringify(a)),console.log("[handleSubmit] Saved submitted items to localStorage with key: ".concat(t,":"),a)}catch(e){console.error("[handleSubmit] Error saving submitted items to localStorage:",e)}try{let e=JSON.parse(localStorage.getItem("evaluationReviewers")||"[]"),r=t.id,a=e.findIndex(e=>e.id===r&&(e.evaluationId===M||e.evaluationId===Number(M)));if(-1!==a){let t=h.size;e[a].completed=t,e[a].total=f.totalItems,localStorage.setItem("evaluationReviewers",JSON.stringify(e)),console.log("[updateProgress] Updated reviewer ".concat(r," progress: ").concat(t,"/").concat(f.totalItems," submitted"));try{{let s=new CustomEvent("reviewerProgressUpdated",{detail:{evaluationId:Number(M),reviewerId:r,completed:t,total:f.totalItems,avgTime:e[a].avgTime||"0.0"}});window.dispatchEvent(s),console.log("[updateProgress] Dispatched reviewerProgressUpdated event for reviewer ".concat(r,": ").concat(t,"/").concat(f.totalItems,", avgTime: ").concat(e[a].avgTime,"s"))}}catch(e){console.error("[updateProgress] Error dispatching progress event:",e)}}else console.warn("[updateProgress] Reviewer ".concat(r," not found for evaluation ").concat(M))}catch(e){console.error("[updateProgress] Error updating reviewer progress:",e)}if(d>=f.totalItems){try{let e=JSON.parse(localStorage.getItem("evaluationReviewers")||"[]"),r=t.id,a=e.findIndex(e=>e.id===r&&(e.evaluationId===M||e.evaluationId===Number(M)));if(-1!==a){e[a].status="completed",e[a].completed=f.totalItems,e[a].total=f.totalItems,localStorage.setItem("evaluationReviewers",JSON.stringify(e)),console.log("[updateReviewerStatus] Updated reviewer ".concat(r," status to completed for evaluation ").concat(M));try{{let e=new CustomEvent("evaluationCompleted",{detail:{evaluationId:Number(M)}});window.dispatchEvent(e),console.log("[updateReviewerStatus] Dispatched evaluationCompleted event for ".concat(M));let t=new CustomEvent("reviewerStatusUpdated",{detail:{evaluationId:Number(M),reviewerId:r}});window.dispatchEvent(t),console.log("[updateReviewerStatus] Dispatched reviewerStatusUpdated event for reviewer ".concat(r))}}catch(e){console.error("[updateReviewerStatus] Error dispatching completion event:",e)}}else console.warn("[updateReviewerStatus] Reviewer ".concat(r," not found for evaluation ").concat(M))}catch(e){console.error("[updateReviewerStatus] Error updating reviewer status:",e)}k(!0)}else{let e=d+1;u(e),j(Math.max(N,e))}},B=e=>e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),W=(()=>{let e=(d-1)%f.data.length,t=f.data[e];return f.columnRoles.filter(e=>"Input"===e.userRole||"Model Output"===e.userRole).map(e=>({name:e.name,content:t[e.name]||"No content available",type:e.userRole}))})(),H=(()=>{let e=(d-1)%f.data.length,t=f.data[e];return f.columnRoles.filter(e=>"Metadata"===e.userRole).map(e=>({name:e.name.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),value:t[e.name]||"N/A"}))})(),q=f&&0!==f.totalItems?(S.has(d)?d:d-1)/f.totalItems*100:0,Q=(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)("button",{onClick:()=>x(!h),className:"inline-flex items-center px-4 py-2 border ".concat(h?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700"," shadow-sm text-sm font-medium rounded-md hover:bg-gray-50 focus:outline-none transition-colors"),"aria-label":h?"Hide instructions":"Show instructions",title:"Toggle instructions",children:[(0,a.jsx)("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Instructions"]}),(0,a.jsx)("button",{onClick:()=>{let t=r.get("participant"),a=t?"evaluation_".concat(M,"_reviewer_").concat(t,"_progress"):"evaluation_".concat(M,"_progress"),s={furthestItem:Math.max(d,N)};try{let e=t?"evaluation_".concat(M,"_reviewer_").concat(t,"_responses"):"evaluation_".concat(M,"_responses"),r={...w,[d]:m};localStorage.setItem(e,JSON.stringify(r)),localStorage.setItem(a,JSON.stringify(s)),console.log("[exitEvaluation] Saved current progress before exit: ".concat(JSON.stringify(s)))}catch(e){console.error("[exitEvaluation] Error saving progress before exit:",e)}let o=r.get("from"),n=r.get("participant");"data-scientist"===o?e.push("/data-scientist"):n?e.push("/reviewer?participant=".concat(n)):e.push("/reviewer")},className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Exit"})]}),V=S.has(d),Y=z&&(!V||E);return(0,a.jsx)(l.A,{title:f.name,actions:Q,children:(0,a.jsxs)("div",{ref:D,className:"relative flex",style:{cursor:J?"col-resize":"default"},children:[(0,a.jsxs)("div",{className:"space-y-6 pr-4",style:{width:"".concat(L,"%")},children:[(0,a.jsx)("div",{className:"bg-white shadow sm:rounded-lg",children:(0,a.jsx)("div",{className:"px-4 py-5 sm:p-6",children:Array.isArray(W)&&W.length>0?(0,a.jsx)("div",{className:"space-y-4 mb-4",children:W.map((e,t)=>(0,a.jsx)(c.A,{content:e.content,title:B(e.name)},t))}):(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(c.A,{content:"No content available"})})})}),H.length>0&&(0,a.jsx)("div",{className:"bg-white shadow sm:rounded-lg",children:(0,a.jsx)("div",{className:"px-4 py-5 sm:p-6",children:(0,a.jsx)("div",{className:"space-y-2 text-xs",children:H.map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"font-medium text-gray-600",children:[e.name,":"]}),(0,a.jsx)("span",{className:"ml-2 text-gray-900",children:e.value})]},t))})})})]}),(0,a.jsx)("div",{className:"relative group",style:{cursor:"col-resize"},children:(0,a.jsx)("div",{className:"absolute inset-y-0 w-4 -left-2 flex items-center justify-center cursor-col-resize",onMouseDown:e=>{e.preventDefault(),A(!0)},children:(0,a.jsx)("div",{className:"h-full w-1 bg-transparent group-hover:bg-indigo-400 transition-colors duration-200",style:{backgroundColor:J?"rgb(79 70 229)":""}})})}),(0,a.jsxs)("div",{className:"pl-4",style:{width:"".concat(100-L,"%")},children:[h&&(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg mb-6 animate-in fade-in slide-in-from-top-4 duration-300",children:(0,a.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,a.jsx)("h3",{className:"text-lg leading-6 font-medium text-blue-900",children:"Instructions"})}),(0,a.jsx)("p",{className:"text-sm text-blue-800",children:f.instructions})]})}),(0,a.jsx)("div",{className:"bg-white shadow sm:rounded-lg",children:(0,a.jsxs)("div",{className:"px-4 py-5 sm:p-6 relative",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Evaluation"}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 flex-shrink-0 -mr-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{d>1&&(y(e=>({...e,[d]:m})),u(d-1))},disabled:d<=1,className:"p-1 rounded-md ".concat(d<=1?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"),children:(0,a.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 min-w-0",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600 whitespace-nowrap flex-shrink-0",children:[d," of ",f.totalItems]}),(0,a.jsx)("div",{className:"flex-1 min-w-16 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(q,"%")}})})]}),(0,a.jsx)("button",{type:"button",onClick:()=>{d<f.totalItems&&d<N&&(y(e=>({...e,[d]:m})),u(d+1))},disabled:d>=f.totalItems||d>=N,className:"p-1 rounded-md ".concat(d>=f.totalItems||d>=N?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"),children:(0,a.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),(0,a.jsx)("form",{onSubmit:F,className:"space-y-6",children:f.criteria.map(e=>{var t,r;return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[e.name,e.required&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]})}),"yes-no"===e.type&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.options.map((t,r)=>(0,a.jsx)("button",{type:"button",onClick:()=>T(e.id,t),className:"px-3 py-1.5 text-sm font-medium rounded-md border transition-colors ".concat(m["criterion-".concat(e.id)]===t?_?"bg-gray-500 text-white border-gray-500":"bg-blue-500 text-white border-blue-500":_?"bg-gray-100 text-gray-500 border-gray-300":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),disabled:_,children:t},r))}),"likert-scale"===e.type&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:(null===(t=e.likertLabels)||void 0===t?void 0:t.low)||"Low"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:(null===(r=e.likertLabels)||void 0===r?void 0:r.high)||"High"})]}),(0,a.jsx)("div",{className:"grid grid-cols-5 gap-2",children:[1,2,3,4,5].map(t=>(0,a.jsx)("button",{type:"button",onClick:()=>T(e.id,t.toString()),className:"px-3 py-1.5 text-sm font-medium rounded-md border transition-colors ".concat(m["criterion-".concat(e.id)]===t.toString()?_?"bg-gray-500 text-white border-gray-500":"bg-blue-500 text-white border-blue-500":_?"bg-gray-100 text-gray-500 border-gray-300":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),disabled:_,children:t},t))})]}),"custom-list"===e.type&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.options.map((t,r)=>(0,a.jsx)("button",{type:"button",onClick:()=>T(e.id,t),className:"px-3 py-1.5 text-sm font-medium rounded-md border transition-colors ".concat(m["criterion-".concat(e.id)]===t?_?"bg-gray-500 text-white border-gray-500":"bg-blue-500 text-white border-blue-500":_?"bg-gray-100 text-gray-500 border-gray-300":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),disabled:_,children:t},r))}),"text-input"===e.type&&(0,a.jsx)("textarea",{rows:3,value:m["criterion-".concat(e.id)]||"",onChange:t=>T(e.id,t.target.value),className:"block w-full border rounded-md shadow-sm sm:text-sm px-3 py-1.5 ".concat(_?"border-gray-300 bg-gray-100 text-gray-500 cursor-not-allowed":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"),placeholder:"Enter ".concat(e.name.toLowerCase(),"..."),disabled:_})]},e.id)})}),(0,a.jsxs)("div",{className:"pt-6",children:[(0,a.jsx)("button",{type:"submit",disabled:!Y||v,className:"w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white ".concat(Y&&!v?"bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500":"bg-gray-400 cursor-not-allowed"),onClick:F,children:v?(0,a.jsxs)(a.Fragment,{children:["Submit",(0,a.jsxs)("svg",{className:"ml-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})]}):_&&!E?"Review Complete":(0,a.jsxs)(a.Fragment,{children:["Submit",(0,a.jsx)(i.A,{className:"ml-2 h-4 w-4"})]})}),_&&(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsxs)("div",{className:"inline-flex items-center px-4 py-2 bg-green-50 border border-green-200 rounded-md",children:[(0,a.jsx)("svg",{className:"h-5 w-5 text-green-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("span",{className:"text-sm font-medium text-green-800",children:"Thank you! Your evaluation has been completed successfully."})]})})]})]})})]})]})})}},5628:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(2115);let s=a.forwardRef(function(e,t){let{title:r,titleId:s,...o}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},o),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))})},5642:(e,t,r)=>{Promise.resolve().then(r.bind(r,4367))},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},7489:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(5155),s=r(2115),o=r(5628);let n=s.forwardRef(function(e,t){let{title:r,titleId:a,...o}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},o),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))});function i(e){let{url:t,title:r,className:i=""}=e,[l,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!0);if(!([".mp4",".webm",".ogg",".mov",".avi",".mkv",".flv"].some(e=>t.toLowerCase().includes(e))||["youtube.com","youtu.be","vimeo.com"].some(e=>t.toLowerCase().includes(e))))return(0,a.jsx)("div",{className:"text-sm text-gray-900 ".concat(i),children:t});if(l)return(0,a.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50 ".concat(i),children:[(0,a.jsxs)("div",{className:"flex items-center text-red-600",children:[(0,a.jsx)(o.A,{className:"h-5 w-5 mr-2"}),(0,a.jsx)("span",{className:"text-sm",children:"Failed to load video"})]}),(0,a.jsx)("div",{className:"mt-2 text-xs text-gray-600",children:(0,a.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Open video in new tab"})})]});let m=(e=>{for(let t of[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,/youtube\.com\/watch\?.*v=([^&\n?#]+)/]){let r=e.match(t);if(r)return r[1]}return null})(t);if(m)return(0,a.jsxs)("div",{className:"relative ".concat(i),children:[(0,a.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(m,"?rel=0"),title:r||"YouTube video",className:"w-full aspect-video rounded-lg",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,onLoad:()=>u(!1),onError:()=>c(!0)}),d&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})})]});let g=(e=>{let t=e.match(/vimeo\.com\/(\d+)/);return t?t[1]:null})(t);return g?(0,a.jsxs)("div",{className:"relative ".concat(i),children:[(0,a.jsx)("iframe",{src:"https://player.vimeo.com/video/".concat(g),title:r||"Vimeo video",className:"w-full aspect-video rounded-lg",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0,onLoad:()=>u(!1),onError:()=>c(!0)}),d&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})})]}):(0,a.jsxs)("div",{className:"relative ".concat(i),children:[(0,a.jsxs)("video",{controls:!0,className:"w-full max-h-96 rounded-lg",onLoadStart:()=>u(!0),onLoadedData:()=>u(!1),onError:()=>c(!0),crossOrigin:"anonymous",children:[(0,a.jsx)("source",{src:t}),"Your browser does not support the video tag."]}),d&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(n,{className:"h-12 w-12 text-gray-400"})})]})}function l(e){let{url:t,title:r,className:n=""}=e,[i,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!0);return(e=>{let t=e.toLowerCase();return[".jpg",".jpeg",".png",".gif",".webp",".svg",".bmp",".ico",".tiff"].some(e=>t.includes(e))||["imgur.com","i.imgur.com","images.unsplash.com","unsplash.com","pixabay.com","pexels.com","flickr.com","instagram.com","pinterest.com","googleusercontent.com","amazonaws.com","cloudinary.com","imagekit.io"].some(e=>t.includes(e))||t.includes("image")||t.includes("photo")||t.includes("picture")})(t)?i?(0,a.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50 ".concat(n),children:[(0,a.jsxs)("div",{className:"flex items-center text-red-600",children:[(0,a.jsx)(o.A,{className:"h-5 w-5 mr-2"}),(0,a.jsx)("span",{className:"text-sm",children:"Failed to load image"})]}),(0,a.jsx)("div",{className:"mt-2 text-xs text-gray-600",children:(0,a.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Open image in new tab"})}),(0,a.jsx)("button",{onClick:()=>{l(!1),d(!0)},className:"mt-2 text-xs text-blue-600 hover:underline",children:"Retry loading"})]}):(0,a.jsxs)("div",{className:"relative flex justify-center ".concat(n),children:[c&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-100 rounded-lg flex items-center justify-center min-h-[200px]",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Loading image..."})]})}),(0,a.jsx)("img",{src:t||"/placeholder.svg",alt:r||"Content image",className:"max-w-full h-auto rounded-lg shadow-sm ".concat(c?"opacity-0":"opacity-100"," transition-opacity duration-300"),style:{maxHeight:"500px"},onLoad:()=>d(!1),onError:()=>{l(!0),d(!1)}})]}):(0,a.jsx)("div",{className:"text-sm text-gray-900 ".concat(n),children:t})}function c(e){let{content:t,title:r,className:s=""}=e;if((e=>{try{return new URL(e.trim()),!0}catch(e){return!1}})(t)){let e=t.trim();return[".mp4",".webm",".ogg",".mov",".avi",".mkv",".flv"].some(t=>e.toLowerCase().includes(t))||["youtube.com","youtu.be","vimeo.com"].some(t=>e.toLowerCase().includes(t))?(0,a.jsxs)("div",{className:s,children:[r&&(0,a.jsx)("div",{className:"text-xs font-medium text-gray-600 mb-2",children:r}),(0,a.jsx)(i,{url:e,title:r})]}):(e=>{let t=e.toLowerCase();return[".jpg",".jpeg",".png",".gif",".webp",".svg",".bmp",".ico",".tiff"].some(e=>t.includes(e))||["imgur.com","i.imgur.com","images.unsplash.com","unsplash.com","pixabay.com","pexels.com","flickr.com","instagram.com","pinterest.com","googleusercontent.com","amazonaws.com","cloudinary.com","imagekit.io"].some(e=>t.includes(e))})(e)?(0,a.jsxs)("div",{className:s,children:[r&&(0,a.jsx)("div",{className:"text-xs font-medium text-gray-600 mb-2",children:r}),(0,a.jsx)(l,{url:e,title:r})]}):(0,a.jsxs)("div",{className:s,children:[r&&(0,a.jsx)("div",{className:"text-xs font-medium text-gray-600 mb-2",children:r}),(0,a.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm break-all",children:e})]})}return(0,a.jsxs)("div",{className:s,children:[r&&(0,a.jsx)("div",{className:"text-xs font-medium text-gray-600 mb-2",children:r}),(0,a.jsx)("p",{className:"text-sm text-gray-900 leading-relaxed",children:t})]})}},8112:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(5155),s=r(5695);function o(e){let{title:t,subtitle:r,children:o,actions:n}=e;return(0,s.useRouter)(),(0,a.jsxs)("div",{className:"min-h-[calc(100vh-4rem)] bg-gray-50 pt-9",children:[(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-2",children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:t}),r&&(0,a.jsx)("p",{className:"text-sm text-gray-600",children:r})]}),n&&(0,a.jsx)("div",{className:"flex-shrink-0 ml-4",children:n})]})}),(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:o})]})}},9416:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(2115);let s=a.forwardRef(function(e,t){let{title:r,titleId:s,...o}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},o),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))})}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(5642)),_N_E=e.O()}]);