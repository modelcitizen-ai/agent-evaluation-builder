(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[403],{232:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var l=a(2115);let r=l.forwardRef(function(e,t){let{title:a,titleId:r,...s}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},s),a?l.createElement("title",{id:r},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"}))})},4958:(e,t,a)=>{"use strict";async function l(){console.log("Client: Fetching evaluations from localStorage");try{let e=JSON.parse(localStorage.getItem("evaluations")||"[]");console.log("Client: Found ".concat(e.length," evaluations in localStorage"));let t=new Set,a=e.filter(e=>t.has(e.id)?(console.log("Duplicate ID found: ".concat(e.id,", filtering out duplicate")),!1):(t.add(e.id),!0));return a.length<e.length&&(console.log("Filtered out ".concat(e.length-a.length," duplicate evaluation(s)")),localStorage.setItem("evaluations",JSON.stringify(a))),a.map(e=>(e.toJSON||(e.toJSON=function(){return this}),e))}catch(e){return console.error("Error fetching evaluations from localStorage:",e),[]}}async function r(e){try{console.log("Client: Creating evaluation in localStorage",e.name);let t=JSON.parse(localStorage.getItem("evaluations")||"[]");e.id&&t.some(t=>t.id===e.id)&&(console.log("Warning: Evaluation with ID ".concat(e.id," already exists. Generating new ID.")),e.id=Date.now()),t.unshift(e),localStorage.setItem("evaluations",JSON.stringify(t)),console.log("Client: Successfully created evaluation in localStorage");let a={...e};return a.toJSON||(a.toJSON=function(){return this}),a}catch(e){throw console.error("Error creating evaluation in localStorage:",e),Error("Failed to create evaluation: ".concat(e.message||String(e)))}}async function s(e){try{console.log("Client: Deleting evaluation ".concat(e," from localStorage"));let t=JSON.parse(localStorage.getItem("evaluations")||"[]").filter(t=>t.id!==e);return localStorage.setItem("evaluations",JSON.stringify(t)),console.log("Client: Successfully deleted evaluation from localStorage"),!0}catch(t){throw console.error("Error deleting evaluation ".concat(e," from localStorage:"),t),Error("Failed to delete evaluation: ".concat(t.message||String(t)))}}a.d(t,{Hg:()=>r,Iw:()=>l,am:()=>s})},5146:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var l=a(5155),r=a(5695),s=a(2115),n=a(232),o=a(8112),i=a(4958);function c(){let e=(0,r.useRouter)(),[t,a]=(0,s.useState)([]),[c,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(!0),[g,h]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{console.log("Starting to load data in test-page");try{console.log("Loading evaluations from localStorage");let e=await (0,i.Iw)();console.log("Loaded evaluations:",e),a(e||[])}catch(e){console.error("Error loading evaluations:",e),h("Failed to load evaluations. Please refresh the page.")}finally{m(!1)}})()},[]);let x=async()=>{try{let t=await (0,i.Hg)({id:Date.now(),name:"New Evaluation ".concat(Date.now()),status:"draft",totalItems:0,createdAt:new Date().toISOString(),criteria:[]});t&&t.id&&e.push("/build/".concat(t.id))}catch(e){console.error("Error creating evaluation:",e),h("Failed to create evaluation. Please try again.")}};return(0,l.jsx)(o.A,{title:"Test Page - Your Evaluations",children:(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Test Page"}),(0,l.jsx)("button",{onClick:x,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded",children:"Create New Evaluation"})]}),u?(0,l.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto"}),(0,l.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading evaluations..."})]})}):g?(0,l.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,l.jsx)("strong",{className:"font-bold",children:"Error: "}),(0,l.jsx)("span",{className:"block sm:inline",children:g})]}):0===t.length?(0,l.jsxs)("div",{className:"bg-gray-100 rounded-lg p-8 text-center",children:[(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:"You haven't created any evaluations yet."}),(0,l.jsx)("button",{onClick:x,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded",children:"Create Your First Evaluation"})]}):(0,l.jsx)("div",{className:"grid grid-cols-1 gap-4",children:t.map(r=>(0,l.jsxs)("div",{className:"border rounded-lg p-4 flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-lg font-semibold",children:r.name}),(0,l.jsxs)("p",{className:"text-sm text-gray-500",children:["Created: ",new Date(r.createdAt).toLocaleDateString()]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("button",{onClick:()=>e.push("/build/".concat(r.id)),className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-1 px-3 rounded text-sm",children:"Edit"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("button",{onClick:()=>d(c===r.id?null:r.id),className:"p-1 rounded-full hover:bg-gray-200",children:(0,l.jsx)(n.A,{className:"h-5 w-5"})}),c===r.id&&(0,l.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10",children:(0,l.jsx)("div",{className:"py-1",children:(0,l.jsx)("button",{onClick:async()=>{confirm("Are you sure you want to delete this evaluation?")&&(await (0,i.am)(r.id),a(t.filter(e=>e.id!==r.id)))},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Delete"})})})]})]})]},r.id))})]})})}},5695:(e,t,a)=>{"use strict";var l=a(8999);a.o(l,"useParams")&&a.d(t,{useParams:function(){return l.useParams}}),a.o(l,"usePathname")&&a.d(t,{usePathname:function(){return l.usePathname}}),a.o(l,"useRouter")&&a.d(t,{useRouter:function(){return l.useRouter}}),a.o(l,"useSearchParams")&&a.d(t,{useSearchParams:function(){return l.useSearchParams}})},8112:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var l=a(5155),r=a(5695);function s(e){let{title:t,subtitle:a,children:s,actions:n}=e;return(0,r.useRouter)(),(0,l.jsxs)("div",{className:"min-h-[calc(100vh-4rem)] bg-gray-50 pt-9",children:[(0,l.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-2",children:(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,l.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:t}),a&&(0,l.jsx)("p",{className:"text-sm text-gray-600",children:a})]}),n&&(0,l.jsx)("div",{className:"flex-shrink-0 ml-4",children:n})]})}),(0,l.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:s})]})}},8573:(e,t,a)=>{Promise.resolve().then(a.bind(a,5146))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(8573)),_N_E=e.O()}]);