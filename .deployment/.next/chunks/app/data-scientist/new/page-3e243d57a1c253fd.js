(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[241],{406:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var a=t(2115);let r=a.forwardRef(function(e,s){let{title:t,titleId:r,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},n),t?a.createElement("title",{id:r},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))})},2383:()=>{},3686:()=>{},3951:(e,s,t)=>{Promise.resolve().then(t.bind(t,5890))},5890:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var a=t(5155),r=t(2115),n=t(5695);let i=r.forwardRef(function(e,s){let{title:t,titleId:a,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},n),t?r.createElement("title",{id:a},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"}))}),l=r.forwardRef(function(e,s){let{title:t,titleId:a,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},n),t?r.createElement("title",{id:a},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"}))});var o=t(406),d=t(8112),c=t(3925),m=t(3247);function u(){let e=(0,n.useRouter)(),[s,t]=(0,r.useState)("excel"),[u,x]=(0,r.useState)(null),[g,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)([]),[b,y]=(0,r.useState)(!1),[v,j]=(0,r.useState)(!1),[N,w]=(0,r.useState)(""),[k,S]=(0,r.useState)(""),A=e=>{if(!e.name.endsWith(".xlsx")&&!e.name.endsWith(".csv")){alert("Please upload an Excel (.xlsx) or CSV file");return}sessionStorage.removeItem("uploadedData"),sessionStorage.removeItem("fileName"),sessionStorage.removeItem("aiAnalysisResult"),sessionStorage.removeItem("useAIAnalysis"),x(e)},I=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024)),t=parseFloat((e/Math.pow(1024,s)).toFixed(2));return"".concat(t," ").concat(["Bytes","KB","MB","GB"][s])},E=(0,r.useCallback)(async()=>{if(u)try{y(!0),sessionStorage.removeItem("uploadedData"),sessionStorage.removeItem("fileName"),sessionStorage.removeItem("aiAnalysisResult"),sessionStorage.removeItem("useAIAnalysis");let s=await M(u);if(v)try{let e=Object.keys(s[0]),t=await C(s,e);sessionStorage.setItem("uploadedData",JSON.stringify(s)),sessionStorage.setItem("aiAnalysisResult",JSON.stringify(t)),sessionStorage.setItem("fileName",u.name),sessionStorage.setItem("useAIAnalysis",JSON.stringify(!0))}catch(e){console.error("AI analysis failed, proceeding with fallback:",e),sessionStorage.setItem("uploadedData",JSON.stringify(s)),sessionStorage.setItem("fileName",u.name),sessionStorage.setItem("useAIAnalysis",JSON.stringify(!1)),sessionStorage.removeItem("aiAnalysisResult")}else sessionStorage.setItem("uploadedData",JSON.stringify(s)),sessionStorage.setItem("fileName",u.name),sessionStorage.setItem("useAIAnalysis",JSON.stringify(!1)),sessionStorage.removeItem("aiAnalysisResult");e.replace("/data-scientist/new/preview")}catch(e){console.error("Error processing file:",e),alert("Error processing file. Please try again."),y(!1)}},[u,e,v]),{analyzeWithAI:D}=(0,m.U)(),C=async(e,s)=>{try{return await D(e,s,!v)}catch(e){return console.error("AI analysis failed in wrapper:",e),{success:!1,error:"AI analysis failed, using fallback analysis"}}},M=async e=>new Promise((s,t)=>{let a=new FileReader;a.onload=a=>{try{var r;let n=null===(r=a.target)||void 0===r?void 0:r.result;if(e.name.endsWith(".csv")){let e=n.split("\n").filter(e=>e.trim());if(e.length<2){t(Error("File must have at least a header row and one data row"));return}let a=e=>{let s=[],t="",a=!1;for(let r=0;r<e.length;r++){let n=e[r];'"'===n?a=!a:","!==n||a?t+=n:(s.push(t.trim()),t="")}return s.push(t.trim()),s.map(e=>e.replace(/^"(.*)"$/,"$1"))},r=a(e[0]),i=e.slice(1).map(e=>{let s=a(e),t={};return r.forEach((e,a)=>{t[e]=s[a]||""}),t});s(i)}else if(e.name.endsWith(".xlsx")){let e=c.LF(n,{type:"array"}),a=e.SheetNames[0],r=e.Sheets[a],i=c.Wp.sheet_to_json(r,{header:1,defval:""});if(i.length<2){t(Error("Excel file must have at least a header row and one data row"));return}let l=i[0],o=i.slice(1).map(e=>{let s={};return l.forEach((t,a)=>{s[t]=e[a]||""}),s});s(o)}else t(Error("Unsupported file format"))}catch(e){t(e)}},a.onerror=()=>t(Error("Failed to read file")),e.name.endsWith(".csv")?a.readAsText(e):e.name.endsWith(".xlsx")&&a.readAsArrayBuffer(e)}),O=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?h(!0):"dragleave"===e.type&&h(!1)},L=e=>{e.preventDefault(),e.stopPropagation(),h(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&A(e.dataTransfer.files[0])},R=e=>{e.target.files&&e.target.files[0]&&A(e.target.files[0])};return(0,a.jsx)(d.A,{title:"New Evaluation",actions:(0,a.jsx)("button",{onClick:()=>e.push("/data-scientist"),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[b&&(0,a.jsxs)("div",{className:"fixed inset-0 bg-white bg-opacity-95 z-50 flex flex-col items-center justify-center",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"h-16 w-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center relative animate-bounce",children:[(0,a.jsx)("div",{className:"h-6 w-6 bg-white rounded-full animate-pulse"}),(0,a.jsx)("div",{className:"absolute inset-0 animate-spin",children:(0,a.jsx)("div",{className:"absolute top-1 right-1 h-3 w-3 bg-yellow-300 rounded-full animate-ping"})}),(0,a.jsx)("div",{className:"absolute inset-0 animate-spin",style:{animationDirection:"reverse",animationDuration:"3s"},children:(0,a.jsx)("div",{className:"absolute bottom-1 left-1 h-2 w-2 bg-pink-300 rounded-full animate-pulse"})}),(0,a.jsx)("div",{className:"absolute -top-2 -left-2 h-1.5 w-1.5 bg-green-400 rounded-full animate-bounce",style:{animationDelay:"0.5s"}}),(0,a.jsx)("div",{className:"absolute -bottom-2 -right-2 h-1.5 w-1.5 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"1s"}})]}),(0,a.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-indigo-200 animate-ping opacity-20"}),(0,a.jsx)("div",{className:"absolute inset-0 rounded-full border-2 border-purple-200 animate-ping opacity-30",style:{animationDelay:"0.5s"}})]})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Interpreting your Data..."}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"This may take a few moments"}),(0,a.jsxs)("div",{className:"flex justify-center mt-4 space-x-1",children:[(0,a.jsx)("div",{className:"h-2 w-2 bg-indigo-600 rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"h-2 w-2 bg-indigo-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,a.jsx)("div",{className:"h-2 w-2 bg-indigo-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})]}),(0,a.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,a.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,a.jsx)("button",{onClick:()=>t("excel"),className:"py-3 px-1 border-b-2 font-medium text-sm ".concat("excel"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(i,{className:"h-5 w-5 mr-2"}),"Static Dataset Evaluation"]})}),(0,a.jsx)("button",{onClick:()=>t("api"),className:"py-3 px-1 border-b-2 font-medium text-sm ".concat("api"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(l,{className:"h-5 w-5 mr-2"}),"Live Generation"]})})]})}),"excel"===s&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload your dataset"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Use this mode to assess the quality of model- or human-written completions that have already been generated. It is suitable for comparing outputs from different models, versions, or subject matter experts using pre-collected data."})]}),(0,a.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors bg-white ".concat(g?"border-indigo-400 bg-indigo-50":"border-gray-300 hover:border-gray-400"),onDragEnter:O,onDragLeave:O,onDragOver:O,onDrop:L,children:[(0,a.jsx)(o.A,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[(0,a.jsx)("span",{className:"text-lg font-medium text-gray-900 block mb-2",children:"Click to upload or drag and drop"}),(0,a.jsx)("span",{className:"text-sm text-gray-500 block",children:"Excel (.xlsx) or CSV files up to 10MB"})]}),(0,a.jsx)("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",accept:".xlsx,.csv",onChange:R})]})]}),u&&(0,a.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.A,{className:"h-6 w-6 text-gray-500 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-800",children:u.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[I(u.size)," • Ready to upload"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700 mr-3",children:"Enable AI Analysis"}),(0,a.jsx)("button",{type:"button",onClick:()=>j(!v),className:"relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(v?"bg-blue-500":"bg-gray-200"),role:"switch","aria-checked":v,children:(0,a.jsx)("span",{"aria-hidden":"true",className:"pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ".concat(v?"translate-x-4":"translate-x-0")})})]})}),(0,a.jsx)("button",{onClick:E,disabled:b,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white ".concat(b?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"," focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"),children:"Upload File"})]})]})}),u&&v&&(0,a.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"The system analyzes your data to suggest optimal evaluation settings. Do not include sensitive or confidential information."})})})]}),"api"===s&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload your dataset and API endpoint"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Use this mode for rapid model testing, prompt engineering, and evaluation of new or fine-tuned models. Upload your input dataset. Enter the model name and endpoint to generate completions in real time."})]}),(0,a.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors bg-white ".concat(g?"border-indigo-400 bg-indigo-50":"border-gray-300 hover:border-gray-400"),onDragEnter:O,onDragLeave:O,onDragOver:O,onDrop:L,children:[(0,a.jsx)(o.A,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"file-upload-api",className:"cursor-pointer",children:[(0,a.jsx)("span",{className:"text-lg font-medium text-gray-900 block mb-2",children:"Click to upload or drag and drop"}),(0,a.jsx)("span",{className:"text-sm text-gray-500 block",children:"Excel (.xlsx) or CSV files up to 10MB"})]}),(0,a.jsx)("input",{id:"file-upload-api",name:"file-upload-api",type:"file",className:"sr-only",accept:".xlsx,.csv",onChange:R})]})]}),u&&(0,a.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.A,{className:"h-6 w-6 text-gray-500 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-800",children:u.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[I(u.size)," • Ready to upload"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700 mr-3",children:"Enable AI Analysis"}),(0,a.jsx)("button",{type:"button",onClick:()=>j(!v),className:"relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(v?"bg-blue-500":"bg-gray-200"),role:"switch","aria-checked":v,children:(0,a.jsx)("span",{"aria-hidden":"true",className:"pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ".concat(v?"translate-x-4":"translate-x-0")})})]})}),(0,a.jsx)("button",{onClick:E,disabled:b,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white ".concat(b?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"," focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"),children:"Upload File"})]})]})}),u&&v&&(0,a.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"The system analyzes your data to suggest optimal evaluation settings. Do not include sensitive or confidential information."})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"api-endpoint",className:"block text-sm font-medium text-gray-700 mb-2",children:"API Endpoint"}),(0,a.jsx)("input",{type:"url",id:"api-endpoint",value:k,onChange:e=>S(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors text-sm",placeholder:"https://api.example.com/v1/generate"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Enter the full URL for the model's API endpoint. This will be used to generate completions during evaluation."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"model-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Model Name"}),(0,a.jsx)("input",{type:"text",id:"model-name",value:N,onChange:e=>w(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors text-sm",placeholder:"e.g., gpt4-finetuned-v1"})]})]})]})]})})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[524,167,441,684,358],()=>s(3951)),_N_E=e.O()}]);